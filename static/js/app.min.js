!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){$(document).ready(function(){console.log("starting output");require("./lib/parser.js")})},{"./lib/parser.js":3}],2:[function(require,module,exports){var ajax={getRequest:function(ext,cb){console.log(ext),axios.get(ext).then(cb).catch(function(error){console.log(error)})},sendRequest:function(ext,t,cb){var dt=JSON.stringify(t);axios.post(ext,dt).then(cb).catch(function(error){console.log(error)})}};module.exports=ajax},{}],3:[function(require,module,exports){var ajax=require("./ajax.js"),viewer=require("./viewer.js"),parser=function(){var params,addItemRequest=function(params){ajax.sendRequest("/items",params,function(response){var display=$("#display_tb"),res=response.data;console.dir(res.code),console.log(res.message),500==res.code?display.html("message: "+res.message+"<br>code: "+res.code):display.text("Go says: status ok")})};$("#resource-method").submit(function(e){var url,type,method,tname="";url=$("#inp_url").val(),type=$("input[name=rsource_typ]:checked").val(),e.preventDefault(),e.stopImmediatePropagation(),tname="xml"===type?"xml_typ":"http_typ",method=$("input[name="+tname+"]:checked").val(),console.log("method: "+method),""!==url&&""!==type&&""!==method?(params={url:url,type:type,method:method},ajax.sendRequest("/poster",params,function(response){var res=response.data;console.log("returned from /poster"),"xml"===params.type?viewer.displayXML(res,params):viewer.displayHTML(res,params)})):(alert("Please select all fields."),console.log("required fields empty!"))}),$("input[name=rsource_typ]").on("click",function(){"xml"===$("input[name=rsource_typ]:checked").val()?$("#http-method-type").fadeOut("slow",function(){$("#xml-method-type").fadeIn("slow")}):$("#xml-method-type").fadeOut("slow",function(){$("#http-method-type").fadeIn("slow")})}),$("#show-list").on("click",function(){ajax.getRequest("/lister?list=bigList",function(response){var res=response.data;viewer.displayList(res.Items,editListItem.setButton,parseListItem.setButton)})});$("#new-item-form").submit(function(e){var name,url,type,method,req;name=$("#i_name").val(),url=$("#i_url").val(),type=$("#i_type").val(),method=$("#i_method").val();var obj={req:req=$("input[name=protor]:checked").val(),name:name,url:url,type:type,method:method};e.preventDefault(),e.stopImmediatePropagation(),$("#save_display").off("click",viewer.setSave),console.log("name: "+name+"url: "+url+"type: "+type+" method: "+method+" req: "+req),"add"===req&&""!==name?($.modal.close(),addItemRequest(""!==url?obj:{req:req,name:name})):"del-cp"===req&&""!==name?(console.log(req+" "+name),$.modal.close(),addItemRequest({req:req,name:name})):"del-url"===req&&""!==url?(console.log(req+" "+url),$.modal.close(),addItemRequest({req:req,url:url})):"modify"===req&&""!==name&&""!==url?($.modal.close(),addItemRequest(obj)):(alert("Please select all necessary fields."),console.log("required fields empty!"))});$(".add-btn a[data-modal]").click(function(event){var name,url,type,method,tname="";return name=$("#hidden_name").val(),url=$("#inp_url").val(),tname="xml"===(type=$("input[name=rsource_typ]:checked").val())?"xml_typ":"http_typ",method=$("input[name="+tname+"]:checked").val(),console.log(typeof name),""!==name&&(console.log("nomshky"),$("#i_name").val(name)),$("#i_url").val(url),$("#i_type").val(type),$("#i_method").val(method),$(this).modal(),!1});var editListItem={setButton:function(){$(".ers a[data-modal]").off("click").on("click",function(event){var name,url,type,method;console.log("the box"),name=$(this).closest(".list_tables").find(".listname").text();var sub=$(this).closest(".url_wrapper_wrap");return url=sub.find(".listurl").text(),type=sub.find(".listtype").text(),method=sub.find(".listmethod").text(),console.log(url),console.log("not box"),$("#i_name").val(name),$("#i_url").val(url),$("#i_type").val(type),$("#i_method").val(method),$(this).modal(),!1})}},parseListItem={setButton:function(){$(".prs a.item_parse").off("click").on("click",function(event){console.log("the box");var name,url,type,method,ptype,pmethod="",box=$(this).closest(".list_tables");id=box.find(".listid").text(),name=box.find(".listname").text(),url=box.find(".listurl").text(),type=box.find(".listtype").text(),method=box.find(".listmethod").text(),console.log(name+url+type+method),console.log("not box"),$("#hidden_id").val(id),$("#hidden_name").val(name),$("#inp_url").val(url),""!==type&&"xml"===type&&(console.log("is xml"),ptype="xml_typ",pmethod=""!==method&&"deep-xml"===method?"deep_xml":""!==method&&"flat-xml"===method?"flat_xml":"raw_xml"),""!==type&&"http"===type&&(console.log("is http"),ptype="http_typ",pmethod=""!==method&&"deep-http"===method?"deep_http":""!==method&&"flat-http"===method?(console.log("is flat http"),"flat_http"):"raw_http"),"xml"===type?$("#http-method-type").fadeOut("slow",function(){$("#xml-method-type").fadeIn("slow")}):$("#xml-method-type").fadeOut("slow",function(){$("#http-method-type").fadeIn("slow")}),$("#"+ptype).prop("checked",!0),$("#"+pmethod).prop("checked",!0)})}}}();module.exports=parser},{"./ajax.js":2,"./viewer.js":4}],4:[function(require,module,exports){var ajax=require("./ajax.js"),viewer={setSave:function(){var stuff=$("#save_text").val(),url=$("#inp_url").val();console.log(stuff);var params={req:"save-xml",url:url,data:stuff};console.log("editing display"),ajax.sendRequest("/items",params,function(response){var disPlay=$("#display_tb"),res=response.data;console.dir(res.code),console.log(res.message),500==res.code?disPlay.html("message: "+res.message+"<br>code: "+res.code):disPlay.text("Go says: status ok")})},displayXML:function(result,params){var display=$("#display_tb"),items="",check=0;"flat-xml"===params.method||"deep-xml"===params.method?(items+='<table id="fancytable" class="display"><col width="35%"><col width="65%"><thead><tr><th>Title</th><th>Keywords</th></tr></thead><tbody>',$.each(result,function(i,v){items+='<tr><td><a href="'+v.Location+'" target="_blank">'+v.Title+"</a></td><td>"+v.Keyword+"</td></tr>"}),items+="</tbody></table>"):"raw-xml"===params.method&&(items+='<textarea id="save_text" style="width: 100%; min-height: 500px;">'+result[0]+"</textarea>",check=1),display.html(items),$("#fancytable").DataTable({searching:!0}),1===check?($("#save_display").on("click",viewer.setSave),console.log($("#save_text").text())):$("#save_display").off("click",viewer.setSave)},displayHTML:function(result){},displayList:function(result,cb1,cb2){var display=$("#display_tb"),items="";$("#save_display").off("click",viewer.setSave),items+='<div class="list_wrapper">',$.each(result,function(i,v){var len=v.Urls.length,count=0;console.log(v.Urls.length),items+='<div class="list_tables"><div class="row name_row"><div class="six columns listname">'+v.Name+'</div><div class="six columns"></div></div>',$.each(v.Urls,function(i,m){var cls="";1<len&&(cls=count%2==0?" even":" odd"),items+='<div class="url_wrapper_wrap'+cls+'"><div class="row url_row"><div class="two columns listid">'+m.ID+'</div><div class="ten columns"><a href="'+m.Url+'" target="_blank" class="listurl">'+m.Url+'</a></div></div><div class="row meta_row"><div class="eight columns"><span class="listtype">'+m.Type+'</span><span class="listmethod">'+m.Method+'</span></div><div class="four columns"><span class="prs"><a href="#" class="item_parse" name="item-parse" value="parse">Parse</a></span><span class="ers"><a href="#ex1" class="item_edit" data-modal>Edit</a></span></div></div></div>',count++}),items+="</div>"}),items+="</div>",display.html(items),cb1(),cb2()}};module.exports=viewer},{"./ajax.js":2}]},{},[1]);
